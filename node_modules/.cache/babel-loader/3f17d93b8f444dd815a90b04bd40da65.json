{"ast":null,"code":"import _classCallCheck from \"/home/anbuthidiff/admin-forntend/node_modules/react-scripts/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/anbuthidiff/admin-forntend/node_modules/react-scripts/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"/home/anbuthidiff/admin-forntend/node_modules/react-scripts/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"/home/anbuthidiff/admin-forntend/node_modules/react-scripts/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/anbuthidiff/admin-forntend/node_modules/react-scripts/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nvar _jsxFileName = \"/home/anbuthidiff/admin-forntend/src/components/ReduxTable/index.js\";\n\nfunction _createSuper(Derived) { return function () { var Super = _getPrototypeOf(Derived), result; if (_isNativeReflectConstruct()) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React from \"react\";\nimport { Table, Row, Col, Input } from \"reactstrap\";\nimport { bindActionCreators } from \"redux\";\nimport { connect } from \"react-redux\";\nimport { fetchList, setTablePage } from \"../../actions/table\";\nimport \"./styles.scss\";\nimport Pagination from \"../Pagination\";\nimport { ChevronDown, ChevronUp } from \"../../assets/img/icons\";\nimport PageSearch from \"../PageSearch\";\nimport Spinner from \"../../components/Spinner\";\nexport var ReduxColumn = function ReduxColumn() {};\n\nvar ReduxTable = /*#__PURE__*/function (_React$Component) {\n  _inherits(ReduxTable, _React$Component);\n\n  var _super = _createSuper(ReduxTable);\n\n  function ReduxTable() {\n    var _this;\n\n    _classCallCheck(this, ReduxTable);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n    _this.state = {\n      page: 1,\n      pageSize: 10,\n      id: \"\",\n      apiURL: \"\",\n      selectedAll: false,\n      selectedIds: [],\n      searchTerm: \"\",\n      isSearch: false,\n      isActive: \"\",\n      pagination: true,\n      selectedSortOption: \"Alphabetical A-Z\",\n      sortByOptions: [{\n        value: \"a-z\",\n        label: \"Alphabetical A-Z\"\n      }]\n    };\n\n    _this.handleSortByChange = function (value) {\n      _this.getSortByOptions(value);\n    };\n\n    return _this;\n  }\n\n  _createClass(ReduxTable, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this$props = this.props,\n          apiURL = _this$props.apiURL,\n          id = _this$props.id,\n          table = _this$props.table;\n      this.setState({\n        id: id,\n        apiURL: apiURL,\n        page: table[id] && table[id].currentPage ? table[id].currentPage : 1,\n        pageSize: table[id] && table[id].pageSize ? table[id].pageSize : 10\n      }, this.fetchData);\n    }\n    /**\n     * Fetch data using API call\n     *\n     * @param {*} force\n     */\n\n  }, {\n    key: \"fetchData\",\n    value: function fetchData(force, sort, sortDir) {\n      var _this$state = this.state,\n          id = _this$state.id,\n          apiURL = _this$state.apiURL,\n          page = _this$state.page,\n          pageSize = _this$state.pageSize,\n          searchTerm = _this$state.searchTerm,\n          pagination = _this$state.pagination;\n      var _this$props2 = this.props,\n          table = _this$props2.table,\n          _this$props2$actions = _this$props2.actions,\n          fetchList = _this$props2$actions.fetchList,\n          setTablePage = _this$props2$actions.setTablePage;\n      var listDetails = table[id] || {};\n      var params = this.props.params || {};\n      params.search = searchTerm;\n      params.sort = sort || \"\";\n      params.sortDir = sortDir || \"\";\n      params.pagination = pagination;\n\n      if (!listDetails.isFetching) {\n        if (!listDetails[page] || force) {\n          fetchList(id, apiURL, page, pageSize, params);\n        } else {\n          setTablePage(id, page);\n        }\n      }\n    }\n    /**\n     * Change page\n     *\n     * @param {*} page\n     */\n\n  }, {\n    key: \"onPageChange\",\n    value: function onPageChange(page) {\n      this.setState({\n        page: page\n      }, this.fetchData);\n    }\n    /**\n     * Change page size\n     *\n     * @param {*} e\n     */\n\n  }, {\n    key: \"onPageSizeChange\",\n    value: function onPageSizeChange(e) {\n      var _this2 = this;\n\n      this.setState({\n        page: 1,\n        pageSize: e.target.value,\n        isSearch: false\n      }, function () {\n        return _this2.fetchData(true);\n      });\n    }\n    /**\n     * Select all checkbox\n     *\n     * @param {*} data\n     * @param {*} e\n     */\n\n  }, {\n    key: \"toggleSelectAll\",\n    value: function toggleSelectAll(data, e) {\n      var _this3 = this;\n\n      var selectedIds = this.state.selectedIds;\n      data.forEach(function (row) {\n        if (e.target.checked) {\n          if (selectedIds.indexOf(row.id) < 0) {\n            selectedIds.push(row.id);\n          }\n        } else {\n          if (selectedIds.indexOf(row.id) >= 0) {\n            selectedIds.splice(selectedIds.indexOf(row.id), 1);\n          }\n        }\n      });\n      this.setState({\n        selectedAll: e.target.checked,\n        selectedIds: selectedIds\n      }, function () {\n        _this3.props.onBulkSelect(selectedIds);\n      });\n    }\n    /**\n     * Single checkbox select\n     *\n     * @param {*} data\n     * @param {*} e\n     */\n\n  }, {\n    key: \"toggleSelect\",\n    value: function toggleSelect(data, e) {\n      var _this4 = this;\n\n      var rowIds = [];\n      data.forEach(function (row) {\n        rowIds.push(row.id);\n      });\n      var rowId = e.target.value;\n      var selectedIds = this.state.selectedIds;\n\n      if (e.target.checked) {\n        if (selectedIds.indexOf(rowId) < 0) {\n          selectedIds.push(rowId);\n        }\n      } else {\n        if (selectedIds.indexOf(rowId) >= 0) {\n          selectedIds.splice(selectedIds.indexOf(rowId), 1);\n        }\n      }\n\n      var selectedLength = 0;\n      rowIds.forEach(function (rowId) {\n        if (selectedIds.indexOf(rowId) >= 0) {\n          selectedLength++;\n        }\n      });\n      this.setState({\n        selectedAll: rowIds.length === selectedLength,\n        selectedIds: selectedIds\n      }, function () {\n        _this4.props.onBulkSelect(selectedIds);\n      });\n    }\n  }, {\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(props) {\n      var table = props.table,\n          id = props.id;\n      var listDetails = table[id];\n      var data = [];\n\n      if (listDetails) {\n        data = listDetails[listDetails.currentPage] || [];\n      }\n\n      var selectedIds = this.state.selectedIds;\n      var selectedLength = 0;\n      data.forEach(function (row) {\n        if (selectedIds.indexOf(row.id) >= 0) {\n          selectedLength++;\n        }\n      });\n      this.setState({\n        selectedAll: selectedLength > 0 && selectedLength === data.length\n      });\n    }\n    /**\n     * Change search term\n     *\n     * @param {*} event\n     */\n\n  }, {\n    key: \"onChange\",\n    value: function onChange(event) {\n      var _this5 = this;\n\n      this.setState({\n        isSearch: true,\n        searchTerm: encodeURIComponent(event.target.value)\n      }, function () {\n        return setTimeout(function () {\n          _this5.fetchData(true);\n\n          _this5.setState({\n            selectedAll: false,\n            selectedIds: []\n          });\n        }, 1000);\n      });\n    }\n  }, {\n    key: \"columnSortBy\",\n    value: function columnSortBy(sortBy) {\n      this.setState({\n        isActive: !this.state.isActive,\n        sortBy: sortBy\n      });\n      var sortDir = \"\";\n\n      if (this.state.isActive) {\n        sortDir = \"DESC\";\n      } else {\n        sortDir = \"ASC\";\n      }\n\n      this.fetchData(true, sortBy, sortDir);\n    }\n  }, {\n    key: \"getSortByOptions\",\n    // Sort by option\n    value: function getSortByOptions(value) {\n      var sortBy = \"\";\n      var sortDir = \"\";\n\n      if (this.state.isActive) {\n        sortDir = \"DESC\";\n      } else {\n        sortDir = \"ASC\";\n      }\n\n      this.fetchData(true, sortBy, sortDir);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this6 = this;\n\n      var _this$props3 = this.props,\n          table = _this$props3.table,\n          id = _this$props3.id,\n          columns = _this$props3.children,\n          headerComponent = _this$props3.headerComponent,\n          showHeader = _this$props3.showHeader,\n          onRowClick = _this$props3.onRowClick,\n          bulkSelect = _this$props3.bulkSelect,\n          headerButton = _this$props3.headerButton,\n          searchPlaceholder = _this$props3.searchPlaceholder,\n          searchDisabled = _this$props3.searchDisabled,\n          newTableHeading = _this$props3.newTableHeading;\n      var listDetails = table[id];\n      var isLoading = !listDetails || listDetails.isFetching;\n      var _this$state2 = this.state,\n          selectedAll = _this$state2.selectedAll,\n          selectedIds = _this$state2.selectedIds,\n          selectedSortOption = _this$state2.selectedSortOption,\n          sortByOptions = _this$state2.sortByOptions;\n      var data = [];\n      var totalCount = 0;\n      var currentPage = \"\";\n      var pageSize = \"\";\n      var startPage = \"\";\n      var endPage = \"\";\n\n      if (listDetails) {\n        currentPage = listDetails.currentPage;\n        totalCount = listDetails.totalCount;\n        pageSize = listDetails.pageSize;\n        data = listDetails[currentPage] || [];\n        startPage = (currentPage - 1) * pageSize + 1;\n        startPage = startPage > totalCount ? totalCount : startPage;\n        endPage = currentPage * pageSize;\n        endPage = endPage > totalCount ? totalCount : endPage;\n      }\n\n      var columnLength = columns.length + (bulkSelect ? 1 : 0);\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"redux-table \".concat(this.props.className),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 292,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 293,\n          columnNumber: 9\n        }\n      }, showHeader && /*#__PURE__*/React.createElement(React.Fragment, null, newTableHeading ? /*#__PURE__*/React.createElement(\"div\", {\n        className: \"page-heading d-flex cover flex-md-row align-items-start flex-column \".concat(searchDisabled ? \"justify-content-end\" : \"justify-content-between\"),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 297,\n          columnNumber: 17\n        }\n      }, !searchDisabled && /*#__PURE__*/React.createElement(PageSearch, {\n        classnames: \"page-search\",\n        placeholder: searchPlaceholder,\n        onChange: this.onChange.bind(this),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 305,\n          columnNumber: 21\n        }\n      })) : /*#__PURE__*/React.createElement(Row, {\n        className: \"mb-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 313,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(Col, {\n        xs: \"12\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 314,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"page-heading d-flex \".concat(searchDisabled ? \"justify-content-end\" : \"justify-content-between\"),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 315,\n          columnNumber: 21\n        }\n      }, !searchDisabled && /*#__PURE__*/React.createElement(PageSearch, {\n        classnames: \"page-search\",\n        placeholder: searchPlaceholder,\n        onChange: this.onChange.bind(this),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 323,\n          columnNumber: 25\n        }\n      }), headerButton && headerButton)))), /*#__PURE__*/React.createElement(Table, {\n        hover: true,\n        responsive: true,\n        className: \"table-outline\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 337,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"thead\", {\n        className: \"thead-light\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 338,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"tr\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 339,\n          columnNumber: 15\n        }\n      }, bulkSelect && /*#__PURE__*/React.createElement(\"th\", {\n        style: {\n          width: 12,\n          paddingRight: 0\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 341,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        type: \"checkbox\",\n        checked: selectedAll,\n        onChange: this.toggleSelectAll.bind(this, data),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 342,\n          columnNumber: 21\n        }\n      })), React.Children.map(columns, function (x) {\n        // TODO: Santhosh, let's have the \"selected\" class applied when you click on the TH for the filterings.\n        return x && /*#__PURE__*/React.createElement(\"th\", {\n          className: \"\".concat(x.props.sortBy !== \"\" ? \"cursor-pointer\" : \"\", \" \").concat(x.props.className),\n          onClick: function onClick() {\n            return !x.props.disableOnClick ? _this6.columnSortBy(x.props.sortBy) : false;\n          },\n          colSpan: x.props.colspan,\n          __self: _this6,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 353,\n            columnNumber: 23\n          }\n        }, x.props.children, !x.props.disableOnClick ? x.props.sortBy === _this6.state.sortBy ? _this6.state.isActive ? /*#__PURE__*/React.createElement(ChevronUp, {\n          __self: _this6,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 368,\n            columnNumber: 31\n          }\n        }) : /*#__PURE__*/React.createElement(ChevronDown, {\n          __self: _this6,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 370,\n            columnNumber: 31\n          }\n        }) : /*#__PURE__*/React.createElement(ChevronDown, {\n          __self: _this6,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 373,\n            columnNumber: 29\n          }\n        }) : \"\");\n      }))), /*#__PURE__*/React.createElement(\"tbody\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 384,\n          columnNumber: 13\n        }\n      }, data.map(function (list, key) {\n        return /*#__PURE__*/React.createElement(\"tr\", {\n          key: key,\n          __self: _this6,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 387,\n            columnNumber: 19\n          }\n        }, bulkSelect && /*#__PURE__*/React.createElement(\"td\", {\n          style: {\n            paddingRight: 0\n          },\n          __self: _this6,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 389,\n            columnNumber: 23\n          }\n        }, /*#__PURE__*/React.createElement(\"input\", {\n          type: \"checkbox\",\n          value: list.id,\n          onChange: _this6.toggleSelect.bind(_this6, data),\n          checked: selectedIds.indexOf(list.id) >= 0,\n          __self: _this6,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 390,\n            columnNumber: 25\n          }\n        })), React.Children.map(columns, function (x) {\n          return x && /*#__PURE__*/React.createElement(\"td\", {\n            className: \"\".concat(x.props.className, \" \").concat(onRowClick && !x.props.disableOnClick ? \"cursor-pointer\" : \"\", \" \").concat(x.props.type && x.props.type === \"link\" ? \"text-link text-underline\" : \"\"),\n            onClick: function onClick() {\n              return x.props.isClickable === \"true\" && onRowClick && !x.props.disableOnClick ? onRowClick(list) : null;\n            },\n            style: {\n              maxWidth: \"300px\"\n            },\n            __self: _this6,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 401,\n              columnNumber: 27\n            }\n          }, x.props.field !== \"action\" ? x.props.renderField ? x.props.renderField(list) : list[x.props.field] : x.props.element);\n        }));\n      }), isLoading ? /*#__PURE__*/React.createElement(Spinner, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 433,\n          columnNumber: 17\n        }\n      }) : data.length === 0 ? /*#__PURE__*/React.createElement(\"tr\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 435,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"td\", {\n        className: \"text-center\",\n        colSpan: columnLength,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 436,\n          columnNumber: 19\n        }\n      }, \"No records found\")) : \"\")), totalCount > 0 && /*#__PURE__*/React.createElement(Row, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 447,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(Col, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 448,\n          columnNumber: 15\n        }\n      }, \"Showing \", startPage, \" to \", endPage, \" of \", totalCount, \" entries\"), /*#__PURE__*/React.createElement(Col, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 451,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(Pagination, {\n        currentPage: currentPage,\n        totalCount: totalCount,\n        pageSize: pageSize,\n        onPageChange: this.onPageChange.bind(this),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 452,\n          columnNumber: 17\n        }\n      })))));\n    }\n  }]);\n\n  return ReduxTable;\n}(React.Component);\n\nfunction mapStateToProps(state) {\n  return {\n    table: state.table\n  };\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    actions: bindActionCreators({\n      fetchList: fetchList,\n      setTablePage: setTablePage\n    }, dispatch)\n  };\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ReduxTable);","map":{"version":3,"sources":["/home/anbuthidiff/admin-forntend/src/components/ReduxTable/index.js"],"names":["React","Table","Row","Col","Input","bindActionCreators","connect","fetchList","setTablePage","Pagination","ChevronDown","ChevronUp","PageSearch","Spinner","ReduxColumn","ReduxTable","state","page","pageSize","id","apiURL","selectedAll","selectedIds","searchTerm","isSearch","isActive","pagination","selectedSortOption","sortByOptions","value","label","handleSortByChange","getSortByOptions","props","table","setState","currentPage","fetchData","force","sort","sortDir","actions","listDetails","params","search","isFetching","e","target","data","forEach","row","checked","indexOf","push","splice","onBulkSelect","rowIds","rowId","selectedLength","length","event","encodeURIComponent","setTimeout","sortBy","columns","children","headerComponent","showHeader","onRowClick","bulkSelect","headerButton","searchPlaceholder","searchDisabled","newTableHeading","isLoading","totalCount","startPage","endPage","columnLength","className","onChange","bind","width","paddingRight","toggleSelectAll","Children","map","x","disableOnClick","columnSortBy","colspan","list","key","toggleSelect","type","isClickable","maxWidth","field","renderField","element","onPageChange","Component","mapStateToProps","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { Table, Row, Col, Input } from \"reactstrap\";\nimport { bindActionCreators } from \"redux\";\nimport { connect } from \"react-redux\";\nimport { fetchList, setTablePage } from \"../../actions/table\";\nimport \"./styles.scss\";\nimport Pagination from \"../Pagination\";\nimport { ChevronDown, ChevronUp } from \"../../assets/img/icons\";\nimport PageSearch from \"../PageSearch\";\nimport Spinner from \"../../components/Spinner\";\n\nexport const ReduxColumn = () => {};\n\nclass ReduxTable extends React.Component {\n  state = {\n    page: 1,\n    pageSize: 10,\n    id: \"\",\n    apiURL: \"\",\n    selectedAll: false,\n    selectedIds: [],\n    searchTerm: \"\",\n    isSearch: false,\n    isActive: \"\",\n    pagination: true,\n    selectedSortOption: \"Alphabetical A-Z\",\n    sortByOptions: [\n      {\n        value: \"a-z\",\n        label: \"Alphabetical A-Z\",\n      },\n    ],\n  };\n\n  componentDidMount() {\n    const { apiURL, id, table } = this.props;\n\n    this.setState(\n      {\n        id,\n        apiURL,\n        page: table[id] && table[id].currentPage ? table[id].currentPage : 1,\n        pageSize: table[id] && table[id].pageSize ? table[id].pageSize : 10,\n      },\n      this.fetchData\n    );\n  }\n\n  /**\n   * Fetch data using API call\n   *\n   * @param {*} force\n   */\n\n  fetchData(force, sort, sortDir) {\n    const { id, apiURL, page, pageSize, searchTerm, pagination } = this.state;\n    const {\n      table,\n      actions: { fetchList, setTablePage },\n    } = this.props;\n\n    const listDetails = table[id] || {};\n\n    const params = this.props.params || {};\n    params.search = searchTerm;\n    params.sort = sort || \"\";\n    params.sortDir = sortDir || \"\";\n    params.pagination = pagination;\n\n    if (!listDetails.isFetching) {\n      if (!listDetails[page] || force) {\n        fetchList(id, apiURL, page, pageSize, params);\n      } else {\n        setTablePage(id, page);\n      }\n    }\n  }\n\n  /**\n   * Change page\n   *\n   * @param {*} page\n   */\n  onPageChange(page) {\n    this.setState({ page }, this.fetchData);\n  }\n\n  /**\n   * Change page size\n   *\n   * @param {*} e\n   */\n  onPageSizeChange(e) {\n    this.setState({ page: 1, pageSize: e.target.value, isSearch: false }, () =>\n      this.fetchData(true)\n    );\n  }\n\n  /**\n   * Select all checkbox\n   *\n   * @param {*} data\n   * @param {*} e\n   */\n  toggleSelectAll(data, e) {\n    const selectedIds = this.state.selectedIds;\n\n    data.forEach((row) => {\n      if (e.target.checked) {\n        if (selectedIds.indexOf(row.id) < 0) {\n          selectedIds.push(row.id);\n        }\n      } else {\n        if (selectedIds.indexOf(row.id) >= 0) {\n          selectedIds.splice(selectedIds.indexOf(row.id), 1);\n        }\n      }\n    });\n\n    this.setState(\n      {\n        selectedAll: e.target.checked,\n        selectedIds: selectedIds,\n      },\n      () => {\n        this.props.onBulkSelect(selectedIds);\n      }\n    );\n  }\n\n  /**\n   * Single checkbox select\n   *\n   * @param {*} data\n   * @param {*} e\n   */\n  toggleSelect(data, e) {\n    const rowIds = [];\n    data.forEach((row) => {\n      rowIds.push(row.id);\n    });\n\n    const rowId = e.target.value;\n    const selectedIds = this.state.selectedIds;\n    if (e.target.checked) {\n      if (selectedIds.indexOf(rowId) < 0) {\n        selectedIds.push(rowId);\n      }\n    } else {\n      if (selectedIds.indexOf(rowId) >= 0) {\n        selectedIds.splice(selectedIds.indexOf(rowId), 1);\n      }\n    }\n\n    let selectedLength = 0;\n    rowIds.forEach((rowId) => {\n      if (selectedIds.indexOf(rowId) >= 0) {\n        selectedLength++;\n      }\n    });\n\n    this.setState(\n      {\n        selectedAll: rowIds.length === selectedLength,\n        selectedIds: selectedIds,\n      },\n      () => {\n        this.props.onBulkSelect(selectedIds);\n      }\n    );\n  }\n\n  componentWillReceiveProps(props) {\n    const { table, id } = props;\n    const listDetails = table[id];\n    let data = [];\n\n    if (listDetails) {\n      data = listDetails[listDetails.currentPage] || [];\n    }\n\n    const selectedIds = this.state.selectedIds;\n    let selectedLength = 0;\n    data.forEach((row) => {\n      if (selectedIds.indexOf(row.id) >= 0) {\n        selectedLength++;\n      }\n    });\n\n    this.setState({\n      selectedAll: selectedLength > 0 && selectedLength === data.length,\n    });\n  }\n\n  /**\n   * Change search term\n   *\n   * @param {*} event\n   */\n  onChange(event) {\n    this.setState(\n      {\n        isSearch: true,\n        searchTerm: encodeURIComponent(event.target.value),\n      },\n      () =>\n        setTimeout(() => {\n          this.fetchData(true);\n          this.setState({\n            selectedAll: false,\n            selectedIds: [],\n          });\n        }, 1000)\n    );\n  }\n\n  columnSortBy(sortBy) {\n    this.setState({ isActive: !this.state.isActive, sortBy: sortBy });\n    let sortDir = \"\";\n    if (this.state.isActive) {\n      sortDir = \"DESC\";\n    } else {\n      sortDir = \"ASC\";\n    }\n    this.fetchData(true, sortBy, sortDir);\n  }\n\n  handleSortByChange = (value) => {\n    this.getSortByOptions(value);\n  };\n\n  // Sort by option\n  getSortByOptions(value) {\n    let sortBy = \"\";\n    let sortDir = \"\";\n    if (this.state.isActive) {\n      sortDir = \"DESC\";\n    } else {\n      sortDir = \"ASC\";\n    }\n    this.fetchData(true, sortBy, sortDir);\n  }\n\n\n\n  render() {\n    const {\n      table,\n      id,\n      children: columns,\n      headerComponent,\n      showHeader,\n      onRowClick,\n      bulkSelect,\n      headerButton,\n      searchPlaceholder,\n      searchDisabled,\n      newTableHeading,\n    } = this.props;\n    const listDetails = table[id];\n    const isLoading = !listDetails || listDetails.isFetching;\n    const {\n      selectedAll,\n      selectedIds,\n      selectedSortOption,\n      sortByOptions,\n    } = this.state;\n\n    let data = [];\n    let totalCount = 0;\n    let currentPage = \"\";\n    let pageSize = \"\";\n    let startPage = \"\";\n    let endPage = \"\";\n\n    if (listDetails) {\n      currentPage = listDetails.currentPage;\n      totalCount = listDetails.totalCount;\n      pageSize = listDetails.pageSize;\n      data = listDetails[currentPage] || [];\n\n      startPage = (currentPage - 1) * pageSize + 1;\n      startPage = startPage > totalCount ? totalCount : startPage;\n\n      endPage = currentPage * pageSize;\n      endPage = endPage > totalCount ? totalCount : endPage;\n    }\n\n    const columnLength = columns.length + (bulkSelect ? 1 : 0);\n\n    return (\n      <div className={`redux-table ${this.props.className}`}>\n        <div>\n          {showHeader && (\n            <>\n              {newTableHeading ? (\n                <div\n                  className={`page-heading d-flex cover flex-md-row align-items-start flex-column ${\n                    searchDisabled\n                      ? \"justify-content-end\"\n                      : \"justify-content-between\"\n                  }`}\n                >\n                  {!searchDisabled && (\n                    <PageSearch\n                      classnames=\"page-search\"\n                      placeholder={searchPlaceholder}\n                      onChange={this.onChange.bind(this)}\n                    />\n                  )}\n                </div>\n              ) : (\n                <Row className=\"mb-3\">\n                  <Col xs=\"12\">\n                    <div\n                      className={`page-heading d-flex ${\n                        searchDisabled\n                          ? \"justify-content-end\"\n                          : \"justify-content-between\"\n                      }`}\n                    >\n                      {!searchDisabled && (\n                        <PageSearch\n                          classnames=\"page-search\"\n                          placeholder={searchPlaceholder}\n                          onChange={this.onChange.bind(this)}\n                        />\n                      )}\n                      {headerButton && headerButton}\n                    </div>\n                  </Col>\n                </Row>\n              )}\n            </>\n          )}\n\n          <Table hover responsive className=\"table-outline\">\n            <thead className=\"thead-light\">\n              <tr>\n                {bulkSelect && (\n                  <th style={{ width: 12, paddingRight: 0 }}>\n                    <input\n                      type=\"checkbox\"\n                      checked={selectedAll}\n                      onChange={this.toggleSelectAll.bind(this, data)}\n                    />\n                  </th>\n                )}\n                {React.Children.map(columns, (x) => {\n                  // TODO: Santhosh, let's have the \"selected\" class applied when you click on the TH for the filterings.\n                  return (\n                    x && (\n                      <th\n                        className={`${\n                          x.props.sortBy !== \"\" ? \"cursor-pointer\" : \"\"\n                        } ${x.props.className}`}\n                        onClick={() => {\n                          return !x.props.disableOnClick\n                            ? this.columnSortBy(x.props.sortBy)\n                            : false;\n                        }}\n                        colSpan={x.props.colspan}\n                      >\n                        {x.props.children}\n                        {!x.props.disableOnClick ? (\n                          x.props.sortBy === this.state.sortBy ? (\n                            this.state.isActive ? (\n                              <ChevronUp />\n                            ) : (\n                              <ChevronDown />\n                            )\n                          ) : (\n                            <ChevronDown />\n                          )\n                        ) : (\n                          \"\"\n                        )}\n                      </th>\n                    )\n                  );\n                })}\n              </tr>\n            </thead>\n            <tbody>\n              {data.map((list, key) => {\n                return (\n                  <tr key={key}>\n                    {bulkSelect && (\n                      <td style={{ paddingRight: 0 }}>\n                        <input\n                          type=\"checkbox\"\n                          value={list.id}\n                          onChange={this.toggleSelect.bind(this, data)}\n                          checked={selectedIds.indexOf(list.id) >= 0}\n                        />\n                      </td>\n                    )}\n                    {React.Children.map(columns, (x) => {\n                      return (\n                        x && (\n                          <td\n                            className={`${x.props.className} ${\n                              onRowClick && !x.props.disableOnClick\n                                ? \"cursor-pointer\"\n                                : \"\"\n                            } ${\n                              x.props.type && x.props.type === \"link\"\n                                ? \"text-link text-underline\"\n                                : \"\"\n                            }`}\n                            onClick={() =>\n                              x.props.isClickable === \"true\" &&\n                              onRowClick &&\n                              !x.props.disableOnClick\n                                ? onRowClick(list)\n                                : null\n                            }\n                            style={{ maxWidth: \"300px\" }}\n                          >\n                            {x.props.field !== \"action\"\n                              ? x.props.renderField\n                                ? x.props.renderField(list)\n                                : list[x.props.field]\n                              : x.props.element}\n                          </td>\n                        )\n                      );\n                    })}\n                  </tr>\n                );\n              })}\n              {isLoading ? (\n                <Spinner />\n              ) : data.length === 0 ? (\n                <tr>\n                  <td className=\"text-center\" colSpan={columnLength}>\n                    No records found\n                  </td>\n                </tr>\n              ) : (\n                \"\"\n              )}\n            </tbody>\n          </Table>\n\n          {totalCount > 0 && (\n            <Row>\n              <Col>\n                Showing {startPage} to {endPage} of {totalCount} entries\n              </Col>\n              <Col>\n                <Pagination\n                  currentPage={currentPage}\n                  totalCount={totalCount}\n                  pageSize={pageSize}\n                  onPageChange={this.onPageChange.bind(this)}\n                />\n              </Col>\n            </Row>\n          )}\n        </div>\n      </div>\n    );\n  }\n}\n\nfunction mapStateToProps(state) {\n  return {\n    table: state.table,\n  };\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    actions: bindActionCreators({ fetchList, setTablePage }, dispatch),\n  };\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ReduxTable);\n"]},"metadata":{},"sourceType":"module"}