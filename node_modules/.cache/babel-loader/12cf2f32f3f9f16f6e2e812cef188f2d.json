{"ast":null,"code":"import _classCallCheck from \"/home/anbuthidiff/admin-forntend/node_modules/react-scripts/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/anbuthidiff/admin-forntend/node_modules/react-scripts/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"/home/anbuthidiff/admin-forntend/node_modules/react-scripts/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"/home/anbuthidiff/admin-forntend/node_modules/react-scripts/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/anbuthidiff/admin-forntend/node_modules/react-scripts/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nvar _jsxFileName = \"/home/anbuthidiff/admin-forntend/src/views/login/index.js\";\n\nfunction _createSuper(Derived) { return function () { var Super = _getPrototypeOf(Derived), result; if (_isNativeReflectConstruct()) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React from \"react\";\nimport { Link } from \"react-router-dom\"; // Components\n\nimport Email from \"../../components/Email\";\nimport Form from \"../../components/Form\";\nimport Password from \"../../components/Password\"; // API call\n\nimport { apiClient } from \"../../apiClient\"; // Configs\n\nimport { endpoints, DEFAULT_API_KEY } from \"../../configs\"; // Helper\n\nimport { getCookie, setCookie, getUrlParameter } from \"../../lib/helper\";\nimport { toast } from \"react-toastify\";\nexport function _userLogin(data) {\n  var redirect = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n  console.log(data);\n  return apiClient.post(endpoints().userLogin, data).then(function (response) {\n    var successMessage;\n\n    if (response && response.data) {\n      successMessage = response.data.message;\n    }\n\n    var _response$data = response.data,\n        token = _response$data.token,\n        userId = _response$data.userId;\n    setCookie(\"session_token\", token);\n    setCookie(\"userId\", userId);\n\n    if (!redirect) {\n      var redirectUrl = getUrlParameter(\"redirect\");\n\n      if (redirectUrl) {\n        window.location.replace(redirectUrl);\n      } else {\n        window.location.replace(\"/dashboard\");\n      }\n    }\n\n    return {\n      successMessage: successMessage\n    } || {};\n  }).catch(function (error) {\n    if (error.response && error.response.status >= 400) {\n      var errorMessage;\n      var errorRequest = error.response.request;\n\n      if (errorRequest && errorRequest.response) {\n        errorMessage = JSON.parse(errorRequest.response).message;\n        toast.error(errorMessage);\n      }\n\n      return {\n        errorMessage: errorMessage\n      } || {};\n    }\n  });\n}\n\nvar Login = /*#__PURE__*/function (_React$Component) {\n  _inherits(Login, _React$Component);\n\n  var _super = _createSuper(Login);\n\n  function Login(props) {\n    var _this;\n\n    _classCallCheck(this, Login);\n\n    _this = _super.call(this, props);\n    _this.state = {\n      height: window.innerHeight\n    };\n    return _this;\n  }\n\n  _createClass(Login, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      window.addEventListener(\"resize\", this._updateDimensions);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      window.removeEventListener(\"resize\", this._updateDimensions);\n    }\n  }, {\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      var redirectUrl = getUrlParameter(\"redirect\");\n      var _this$props$preventRe = this.props.preventRedirect,\n          preventRedirect = _this$props$preventRe === void 0 ? false : _this$props$preventRe;\n      console.log(preventRedirect, \"preventredirect\");\n\n      if (redirectUrl && !getCookie(\"session_token\") && !preventRedirect) {\n        this.props.history.push(\"/login?redirect=\".concat(redirectUrl));\n      } else if (getCookie(\"session_token\") && !preventRedirect) {\n        // if session_token redirect to dashboard\n        this.props.history.push(\"/dashboard\");\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var redirectUrl = getUrlParameter(\"redirect\");\n\n      if (!redirectUrl) {\n        redirectUrl = \"/dashboard\";\n      }\n\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"p-3 mt-5\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"card rounded p-4 m-auto\",\n        style: {\n          maxWidth: \"450px\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"h5\", {\n        className: \"font-weight-bold mt-4 mb-4 text-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 11\n        }\n      }, \"Login To Admin Portal\"), /*#__PURE__*/React.createElement(\"div\", {\n        className: [\"basic-login-form\", \"\"].join(\" \"),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(Form, {\n        onSubmit: function onSubmit(values) {\n          values.email = values.email ? values.email : null;\n          values.password = values.password ? values.password : null;\n\n          _userLogin(values);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: [\"field-wrapper\"].join(\"\"),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(Email, {\n        name: \"email\",\n        placeholder: \"Email Address\",\n        onKeyDown: this._hideErrorMessage,\n        required: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 17\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: [\"field-wrapper\"].join(\" \"),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(Password, {\n        name: \"password\",\n        placeholder: \"Password\",\n        onKeyDown: this._hideErrorMessage,\n        required: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 17\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: [\"field-wrapper\"].join(\" \"),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group text-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"button\", {\n        type: \"submit\",\n        className: \"btn btn-login w-100\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 19\n        }\n      }, \"Log in\")))))));\n    }\n  }]);\n\n  return Login;\n}(React.Component);\n\nexport default Login;","map":{"version":3,"sources":["/home/anbuthidiff/admin-forntend/src/views/login/index.js"],"names":["React","Link","Email","Form","Password","apiClient","endpoints","DEFAULT_API_KEY","getCookie","setCookie","getUrlParameter","toast","_userLogin","data","redirect","console","log","post","userLogin","then","response","successMessage","message","token","userId","redirectUrl","window","location","replace","catch","error","status","errorMessage","errorRequest","request","JSON","parse","Login","props","state","height","innerHeight","addEventListener","_updateDimensions","removeEventListener","preventRedirect","history","push","maxWidth","join","values","email","password","_hideErrorMessage","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { Link } from \"react-router-dom\";\n\n// Components\nimport Email from \"../../components/Email\";\nimport Form from \"../../components/Form\";\nimport Password from \"../../components/Password\";\n\n// API call\nimport { apiClient } from \"../../apiClient\";\n\n// Configs\nimport { endpoints, DEFAULT_API_KEY } from \"../../configs\";\n\n// Helper\nimport { getCookie, setCookie, getUrlParameter } from \"../../lib/helper\";\n\nimport { toast } from \"react-toastify\";\n\nexport function _userLogin(data, redirect = false) {\n  console.log(data);\n  return apiClient\n    .post(endpoints().userLogin, data)\n    .then((response) => {\n      let successMessage;\n      if (response && response.data) {\n        successMessage = response.data.message;\n      }\n\n      const { token, userId } = response.data;\n\n      setCookie(\"session_token\", token);\n      setCookie(\"userId\", userId);\n\n      if (!redirect) {\n        const redirectUrl = getUrlParameter(\"redirect\");\n\n        if (redirectUrl) {\n          window.location.replace(redirectUrl);\n        } else {\n          window.location.replace(\"/dashboard\");\n        }\n      }\n\n      return { successMessage } || {};\n    })\n    .catch((error) => {\n      if (error.response && error.response.status >= 400) {\n        let errorMessage;\n        const errorRequest = error.response.request;\n        if (errorRequest && errorRequest.response) {\n          errorMessage = JSON.parse(errorRequest.response).message;\n          toast.error(errorMessage);\n        }\n        return { errorMessage } || {};\n      }\n    });\n}\n\nclass Login extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      height: window.innerHeight,\n    };\n  }\n\n  componentDidMount() {\n    window.addEventListener(\"resize\", this._updateDimensions);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener(\"resize\", this._updateDimensions);\n  }\n\n  componentWillMount() {\n    const redirectUrl = getUrlParameter(\"redirect\");\n    const { preventRedirect = false } = this.props;\n\n    console.log(preventRedirect, \"preventredirect\");\n\n    if (redirectUrl && !getCookie(\"session_token\") && !preventRedirect) {\n      this.props.history.push(`/login?redirect=${redirectUrl}`);\n    } else if (getCookie(\"session_token\") && !preventRedirect) {\n      // if session_token redirect to dashboard\n      this.props.history.push(\"/dashboard\");\n    }\n  }\n\n  render() {\n    let redirectUrl = getUrlParameter(\"redirect\");\n    if (!redirectUrl) {\n      redirectUrl = \"/dashboard\";\n    }\n\n    return (\n      <div className=\"p-3 mt-5\">\n        <div className=\"card rounded p-4 m-auto\" style={{ maxWidth: \"450px\" }}>\n          <h5 className=\"font-weight-bold mt-4 mb-4 text-center\">\n            Login To Admin Portal\n          </h5>\n          <div className={[\"basic-login-form\", \"\"].join(\" \")}>\n            <Form\n              onSubmit={(values) => {\n                values.email = values.email ? values.email : null;\n                values.password = values.password ? values.password : null;\n\n                _userLogin(values);\n              }}\n            >\n              <div className={[\"field-wrapper\"].join(\"\")}>\n                <Email\n                  name=\"email\"\n                  placeholder=\"Email Address\"\n                  onKeyDown={this._hideErrorMessage}\n                  required\n                />\n              </div>\n\n              <div className={[\"field-wrapper\"].join(\" \")}>\n                <Password\n                  name=\"password\"\n                  placeholder=\"Password\"\n                  onKeyDown={this._hideErrorMessage}\n                  required\n                />\n              </div>\n              <div className={[\"field-wrapper\"].join(\" \")}>\n                <div className=\"form-group text-center\">\n                  <button type=\"submit\" className=\"btn btn-login w-100\">\n                    Log in\n                  </button>\n                </div>\n              </div>\n            </Form>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Login;\n"]},"metadata":{},"sourceType":"module"}