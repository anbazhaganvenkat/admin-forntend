{"ast":null,"code":"import _slicedToArray from \"/home/anbuthidiff/admin-forntend/node_modules/react-scripts/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/home/anbuthidiff/admin-forntend/src/components/header/UserNavDropdown.js\";\n\nimport React, { useEffect, useState } from \"react\";\nimport { DropdownItem, DropdownMenu, DropdownToggle, UncontrolledDropdown, NavLink } from \"reactstrap\";\nimport Avatar from \"../Avatar\";\nimport { getCookie, clearCookie } from \"../../lib/helper\";\nimport { Link } from \"react-router-dom\";\nimport { apiClient } from \"../../apiClient\";\nimport { endpoints } from \"../../configs\";\nimport history from \"../../history\";\nimport { UserIcon } from \"../../assets/img/icons\";\n\nfunction logoutUser() {\n  apiClient.defaults.headers.common.Authorization = null;\n  clearCookie(\"session_token\");\n  clearCookie(\"role\");\n  clearCookie(\"userId\");\n  history.push(\"/login\");\n}\n\nvar UserNavDropdown = function UserNavDropdown(props) {\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      firstName = _useState2[0],\n      setFirstName = _useState2[1];\n\n  var _useState3 = useState(null),\n      _useState4 = _slicedToArray(_useState3, 2),\n      lastName = _useState4[0],\n      setLastName = _useState4[1];\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      isLoading = _useState6[0],\n      setIsLoading = _useState6[1];\n\n  var _useState7 = useState(\"\"),\n      _useState8 = _slicedToArray(_useState7, 2),\n      avatarUrl = _useState8[0],\n      setAvatarUrl = _useState8[1];\n\n  var _useState9 = useState(null),\n      _useState10 = _slicedToArray(_useState9, 2),\n      userId = _useState10[0],\n      setUserId = _useState10[1];\n\n  var _useState11 = useState(null),\n      _useState12 = _slicedToArray(_useState11, 2),\n      expertId = _useState12[0],\n      setExpertId = _useState12[1]; // Set session token\n\n\n  var token = getCookie(\"session_token\");\n  useEffect(function () {\n    setIsLoading(true);\n  }, []);\n  var userLoggedIn = getCookie(\"userId\") !== undefined && getCookie(\"userId\") !== \"\";\n\n  var _getUserDetails = function _getUserDetails() {\n    return userLoggedIn && apiClient.get(\"\".concat(endpoints().userAPI)).then(function (response) {\n      var successMessage;\n\n      if (response && response.data) {\n        successMessage = response.data.message;\n      }\n\n      var _response$data = response.data,\n          id = _response$data.id,\n          firstName = _response$data.firstName,\n          lastName = _response$data.lastName,\n          avatarUrl = _response$data.avatarUrl,\n          expertId = _response$data.expertId;\n      setFirstName(firstName);\n      setLastName(lastName);\n      setAvatarUrl(avatarUrl);\n      setExpertId(expertId);\n      setIsLoading(false);\n      setUserId(id);\n    }).catch(function (error) {\n      if (error.response && error.response.status >= 400) {\n        var errorMessage;\n        var errorRequest = error.response.request;\n\n        if (errorRequest && errorRequest.response) {\n          errorMessage = JSON.parse(errorRequest.response).message;\n        }\n\n        console.error(errorMessage);\n      }\n    });\n  };\n\n  useEffect(function () {\n    _getUserDetails();\n  }, [isLoading]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"dropdown-wrapper ml-auto\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 5\n    }\n  }, userLoggedIn ? /*#__PURE__*/React.createElement(UncontrolledDropdown, {\n    inNavbar: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(DropdownToggle, {\n    nav: true,\n    className: \"p-0\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 11\n    }\n  }, token && !isLoading && /*#__PURE__*/React.createElement(Avatar, {\n    firstName: firstName,\n    lastName: lastName,\n    size: \"xs\",\n    fontSize: 12,\n    url: avatarUrl,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(DropdownMenu, {\n    right: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(DropdownItem, {\n    tag: \"li\",\n    className: \"edit-profile-item\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 13\n    }\n  }, token && /*#__PURE__*/React.createElement(Avatar, {\n    firstName: firstName,\n    lastName: lastName,\n    size: \"customSize\",\n    imageSize: \"50\",\n    url: avatarUrl,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"edit-profile-actions\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"edit-profile-name\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 19\n    }\n  }, firstName, \" \", lastName)))), /*#__PURE__*/React.createElement(DropdownItem, {\n    divider: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(Link, {\n    to: \"\",\n    onClick: function onClick() {\n      return logoutUser();\n    },\n    className: \"edit-profile-logout text-danger\",\n    style: {\n      textDecoration: \"none\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(DropdownItem, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 15\n    }\n  }, \"Sign Out\")))) : \"\");\n};\n\nexport default UserNavDropdown;","map":{"version":3,"sources":["/home/anbuthidiff/admin-forntend/src/components/header/UserNavDropdown.js"],"names":["React","useEffect","useState","DropdownItem","DropdownMenu","DropdownToggle","UncontrolledDropdown","NavLink","Avatar","getCookie","clearCookie","Link","apiClient","endpoints","history","UserIcon","logoutUser","defaults","headers","common","Authorization","push","UserNavDropdown","props","firstName","setFirstName","lastName","setLastName","isLoading","setIsLoading","avatarUrl","setAvatarUrl","userId","setUserId","expertId","setExpertId","token","userLoggedIn","undefined","_getUserDetails","get","userAPI","then","response","successMessage","data","message","id","catch","error","status","errorMessage","errorRequest","request","JSON","parse","console","textDecoration"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport {\n  DropdownItem,\n  DropdownMenu,\n  DropdownToggle,\n  UncontrolledDropdown,\n  NavLink,\n} from \"reactstrap\";\nimport Avatar from \"../Avatar\";\nimport { getCookie, clearCookie } from \"../../lib/helper\";\nimport { Link } from \"react-router-dom\";\nimport { apiClient } from \"../../apiClient\";\nimport { endpoints } from \"../../configs\";\nimport history from \"../../history\";\nimport { UserIcon } from \"../../assets/img/icons\";\n\nfunction logoutUser() {\n  apiClient.defaults.headers.common.Authorization = null;\n  clearCookie(\"session_token\");\n  clearCookie(\"role\");\n  clearCookie(\"userId\");\n  history.push(\"/login\");\n}\n\nconst UserNavDropdown = (props) => {\n  const [firstName, setFirstName] = useState(null);\n  const [lastName, setLastName] = useState(null);\n  const [isLoading, setIsLoading] = useState(false);\n  const [avatarUrl, setAvatarUrl] = useState(\"\");\n  const [userId, setUserId] = useState(null);\n  const [expertId, setExpertId] = useState(null);\n\n  // Set session token\n  const token = getCookie(\"session_token\");\n\n  useEffect(() => {\n    setIsLoading(true);\n  }, []);\n\n  const userLoggedIn =\n    getCookie(\"userId\") !== undefined && getCookie(\"userId\") !== \"\";\n\n  const _getUserDetails = () =>\n    userLoggedIn &&\n    apiClient\n      .get(`${endpoints().userAPI}`)\n      .then((response) => {\n        let successMessage;\n        if (response && response.data) {\n          successMessage = response.data.message;\n        }\n\n        const { id, firstName, lastName, avatarUrl, expertId } = response.data;\n\n        setFirstName(firstName);\n        setLastName(lastName);\n        setAvatarUrl(avatarUrl);\n        setExpertId(expertId);\n        setIsLoading(false);\n        setUserId(id);\n      })\n      .catch((error) => {\n        if (error.response && error.response.status >= 400) {\n          let errorMessage;\n          const errorRequest = error.response.request;\n          if (errorRequest && errorRequest.response) {\n            errorMessage = JSON.parse(errorRequest.response).message;\n          }\n          console.error(errorMessage);\n        }\n      });\n\n  useEffect(() => {\n    _getUserDetails();\n  }, [isLoading]);\n\n  return (\n    <div className=\"dropdown-wrapper ml-auto\">\n      {userLoggedIn ? (\n        <UncontrolledDropdown inNavbar>\n          <DropdownToggle nav className=\"p-0\">\n            {token && !isLoading && (\n              <Avatar\n                firstName={firstName}\n                lastName={lastName}\n                size=\"xs\"\n                fontSize={12}\n                url={avatarUrl}\n              />\n            )}\n          </DropdownToggle>\n          <DropdownMenu right>\n            <DropdownItem tag={\"li\"} className={\"edit-profile-item\"}>\n              {token && (\n                <Avatar\n                  firstName={firstName}\n                  lastName={lastName}\n                  size=\"customSize\"\n                  imageSize={\"50\"}\n                  url={avatarUrl}\n                />\n              )}\n              <div className=\"edit-profile-actions\">\n                <div className=\"edit-profile-name\">\n                  <strong>\n                    {firstName} {lastName}\n                  </strong>\n                </div>\n              </div>\n            </DropdownItem>\n            <DropdownItem divider />\n            <Link\n              to=\"\"\n              onClick={() => logoutUser()}\n              className=\"edit-profile-logout text-danger\"\n              style={{ textDecoration: \"none\" }}\n            >\n              <DropdownItem>Sign Out</DropdownItem>\n            </Link>\n          </DropdownMenu>\n        </UncontrolledDropdown>\n      ) : (\n        \"\"\n      )}\n    </div>\n  );\n};\n\nexport default UserNavDropdown;\n"]},"metadata":{},"sourceType":"module"}